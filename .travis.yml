sudo: required

language: java

jdk:
  - oraclejdk8

services:
  - docker

install: ./gradlew --version

script: ./gradlew clean build asciidoctor scaladoc
script: ./gradlew skysail.server:export.server.int

after_success:
  - docker --version
  - cd skysail.server/release; docker build -t evandor/skysail-server .
  - docker images
  - docker login -u "$DOCKER_USERNAME" -p "$DOCKER_PASSWORD"
  - docker push $DOCKER_USERNAME/skysail-server:latest

#  - docker tag skysail-server $DOCKER_USERNAME/skysail-server
