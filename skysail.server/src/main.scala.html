@(response: ResponseEventBase)(content: Html)

<!DOCTYPE html>
<html>
<head>
    @head()
</head>

<body style="height:100%">

    @navbar()

    <div class="container-fluid">
        <div class="row">
            <nav class="col-md-2 d-none d-md-block bg-light sidebar">
                <div class="sidebar-sticky">
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active" href="#">
                                <span data-feather="home"></span>
                                Applications <span class="sr-only">(current)</span>
                                <div id="appnav"></div>
                                <div id="menunav"></div>
                                <div id="tree1"></div>
                            </a>
                        </li>
                    </ul>

                </div>
            </nav>

            <main role="main" class="col-md-9 ml-sm-auto col-lg-10 pt-3 px-4">
                @content
            </main>
        </div>
    </div>

    <script>

      function createElement(i, name,context) {
        return $('<div>', {
          html: $('<a>', {
            href: context,
            text: "["+name+"]"
          })
        })
      }

      /*$.get( "/_root/apps", function( data ) {
        var c=$("#appnav");
        $.each(data.applications, function(i, obj) {
          c.append(createElement(1, obj.name, obj.context));
        });
      }, 'json');*/

      $.get( "/_root/menu", function( data ) {
        var json = JSON.parse("[" + JSON.stringify(data) + "]")
        $("#tree1").tree({
              data: json,
              saveState: 'skysail-nav-tree'
        });
        $('#tree1').on('tree.click', function(event) {
            //console.log("event", event.node);
            var node = event.node;
            window.location.href = node.url;
        });
      });


    </script>

</body>

</html>
